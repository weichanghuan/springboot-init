pipeline {
    agent any

    stages {
        stage('Build JAR') {
            steps {
                sh "mvn clean package -B -e -U -DskipTests"
            }
        }

        stage('Build Docker Image') {
                        steps {
                            withDockerRegistry(credentialsId: '2222', url: 'https://hub.docker.com/repository/docker/weichanghuan/springboot-init') {
                                sh "docker build -f ./springboot-init/src/main/docker/Dockerfile -t weichanghuan/springboot-init:v1 ."
                            }
                        }
        }
    }



}